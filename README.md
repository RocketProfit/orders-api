# orders-api
Апи, при помощи которого можно создавать заказы и получать информацию по ним.

## CreateOrderWithCustomData
(Создание заказа с добавлением пользовательских данных)
#### Пример URL для обращения:

 http://rocketprofit.ru/crm/api/CreateOrderWithCustomData?flow_id=1&phone=82223334455&fio=Теркин%20Василий%20Василиевич&key=hq6R8IxbiEuPSzLjfXnTCk2eyaMKt5&custom_data[my_shit]=mysupershit&custom_data[my_other_shit]=mysupershit2

 Данне можно передавать методом GET или POST

#### Возможные данные для передачи (* - обязательные):

 `{
      'phone' : '8913154884', // * число или строка, содержащая только цифры от 10 до 13 знаков
      'fio' : 'Петров Василий Юрьевич', // * любая сторка
      'login' : 'bestPartner', // * логин в системе rocketprofit.ru
      'flow_id' : '123', // * число или строка, содержащая только цифры  - ID потока в системе rocketprofit.ru
      'key' : '1bc29b36f623ba82aaf6724fd3b16718', // * строка, которая формируется по алгоритму md5($api_key.$flow_id.$phone); Где точка - конкатенация строк;
      'ip' : '195.123.234.23', // строка, IP адрес покупателя
      'date' : '2015-05-06 22:18:12', // Дата создания заказа в формате TIMESTAMP
      'custom_data' : {'myData' : 123}, // произвольный массив данных, который сохранятся в нашей системе и жет быть запрошен позже
 }`

#### Формат ответа:
 JSON-ответ {
        'code': $code,
        'message': $message,
        'order_id': $order_id
 }

 Где:
 * $code [число] - код ответа (200 - если успех и любой другой, если ошибка)
 * message [строка] - сообщение об успешно выполненной операции, либо об ошибке (зависит от кода)
 * order_id [число] - номер заказа (возвращается только в случае успешно завершенной операции)

 Ошибки:

 * 481 - Заполните телефон!
 * 482 - Заполните ФИО!
 * 483 - Невозможно определить поток! ( не передан flow_id)
 * 484 - Поток № $flow_id не зарегистрирован в системе!
 * 485 - Неверный токен!
 * 500 - Ошибка валидации поля (Если какое-либо переданное поле не прошло валидацию)

 Успех:
 * 200 - Заказ успешно создан! Номер заказа: $order_id
