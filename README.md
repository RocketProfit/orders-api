# orders-api
Апи, при помощи которого можно создавать заказы и получать информацию по ним.

## CreateOrderWithCustomData (Создание заказа с добавлением пользовательских данных)
### Пример URL для обращения:

 http://rocketprofit.ru/crm/api/CreateOrderWithCustomData?flow_id=1&phone=82223334455&fio=Теркин%20Василий%20Василиевич&token=hq6R8IxbiEuPSzLjfXnTCk2eyaMKt5&custom_data[my_shit]=mysupershit&custom_data[my_other_shit]=mysupershit2

 Данне можно передавать методом GET или POST

### Все возможные данные для передачи:
 * login
 * phone
 * fio
 * flow_id
 * key
 * ip
 * date
 * custom_data

### Обязательные данные для передачи:
 * phone
 * fio
 * flow_id
 * key
 * login

### Формат данных:

 * phone - число или строка, содержащая только цифры от 10 до 13 знаков
 * fio - любая сторка
 * login - логин в системе rocketprofit.ru
 * flow_id - число или строка, содержащая только цифры  - ID потока в системе rocketprofit.ru
 * ip - строка, IP адрес покупателя
 * date - Дата создания заказа в формате TIMESTAMP
 * key - строка, которая формируется по алгоритму md5($api_key.$flow_id.$phone); Где точка - конкатенация строк;
 * custom_data - произвольный массив данных, которые сохранятся в нашей системе и могут быть запрошены позже

### Формат ответа:
 JSON-ответ {
        'code': $code,
        'message': $message,
        'order_id': $order_id
 }

 Где:
 * $code [число] - код ответа (200 - если успех и любой другой, если ошибка)
 * message [строка] - сообщение об успешно выполненной операции, либо об ошибке (зависит от кода)
 * order_id [число] - номер заказа (возвращается только в случае успешно завершенной операции)

### Возможны следующие варианты ответов:
#### Ошибки:

 * 481 - Заполните телефон!
 * 482 - Заполните ФИО!
 * 483 - Невозможно определить поток! ( не передан flow_id)
 * 484 - Поток № $flow_id не зарегистрирован в системе!
 * 485 - Неверный токен!
 * 500 - Ошибка валидации поля (Если какое-либо переданное поле не прошло валидацию)

#### Успех:
 * 200 - Заказ успешно создан! Номер заказа: $order_id
